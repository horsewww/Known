# V1.2.16

## 更新日期

- 2023-09-28

## 更新内容

- 😄系统管理模块列表增加查看链接
- 😄用户管理增加更换部门功能
- 🐛修复角色表单只读模式问题
- 🐛修复无组织架构用户无法保存问题
- 🔨优化运维人员字段配置
- 😄添加获取用户信息接口
- 😄支持Server端呈现模式部署
- 🐛修复Server模式首页图表不显示问题
- 🐛修复Server模式附件上传问题
- 🐛修复ServiceHelper调用参数类型问题
- 🐛修复组织架构用户查询问题
- 🐛修复列表代码字段匹配不到数据显示为空问题
- 🔨优化无标签Field组件布局
- 😄Picker组件增加字段保存Value和Text
- 😄Toolbar组件增加SetItemName方法
- 😄Database增加SaveDatas方法

## 详细内容

**1. 用户管理**

- 增加更换部门功能
- 运维人员选项只有平台模式和平台企业可见

![用户管理](https://foruda.gitee.com/images/1695085530091696500/6f9ef406_14334.png "屏幕截图")

**2. Server模式**

- 支持Server模式部署
- 支持附件上传，Client类上传附件方法变更为`PostWithFileAsync`

```csharp
//上传附件
public Task<Result> UploadFilesAsync(object data) => Context.PostWithFileAsync("File/UploadFiles", data);
```

**3. Picker**

- 增加字段保存Value和Text

```csharp
table.Field<Picker>("选择", "Picker1")
     .Set(f => f.Pick, new XXXPicker())
     .Set(f => f.TextField, "PickerName1")
     .Build();
```

**4. Toolbar**

- 增加SetItemName方法

```csharp
//示例1
private void OnAction(ButtonInfo info)
{
    if (info.Id == "Open")
    {
        toolbar?.SetItemName("Open", info.Name == "打开" ? "关闭" : "打开");
    }
}
//示例2
public void Enable()
{
    var item = Tools?.FirstOrDefault(t => t.Id == "Enable");
    if (item != null)
    {
        toolbar?.SetItemName(item.Id, item.Name == "启用" ? "禁用" : "启用");
    }
}
```

**5. Database**

- 增加SaveDatas方法批量保存实体

```csharp
db.SaveDatas(new List<TbTest> { test1, test2 });
```
