# V1.2.12

## 更新日期

- 2023-08-06

## 更新内容

- 🐛修复登录失败提示信息不显示问题
- 🐛修复RichText只读模式最大高度及清空问题
- 🔨优化Tabs和DataGrid自适应布局
- 🐛修复单页Navigate页面参数报错问题
- 😄新增GroupBox组件
- 🔨优化RichText支持图片和视频上传本地/OSS/COS
- 😄新增PDF预览组件
- 😄新增打印组件
- 😄新增正则表达式验证

## 详细内容

**1. GroupBox组件**

- 显示一组表单信息

```csharp
protected override void BuildRenderTree(RenderTreeBuilder builder)
{
    builder.Component<GroupBox>()
           .Set(c => c.Title, "基本信息")
           .Set(c => c.ChildContent, BuildBody) //建造组内容
           .Build();
}
```

![GroupBox](https://foruda.gitee.com/images/1691289557278508574/75e2e7cd_14334.png "屏幕截图")

**2. PDF预览组件**

- 基于pdfobject.js实现

```csharp
//嵌入页面显示PDF
protected override void BuildRenderTree(RenderTreeBuilder builder)
{
    var stream = FileService.GetPdfStream();
    builder.Component<PdfView>("pdfView")
           .Set(c => c.Style, "demo-pdf")
           .Set(c => c.Stream, stream)
           .Build();
}
//点击按钮弹窗显示PDF
private void OnShowPDF()
{
    var stream = FileService.GetPdfStream();
    UI.ShowPdf("查看PDF", 600, 400, stream);
}
```

![PDF预览](https://foruda.gitee.com/images/1691289652682606486/9997bcb3_14334.png "屏幕截图")

**3. 打印组件**

- 打印自定义表单
- 调用浏览器打印组件
- 表单样式需写在组件中

```csharp
private void OnPrint()
{
    //PrintForm为打印表单组件
    UI.Print<PrintForm>(form => form.Set(c => c.IsPrint, true));
}
```

![打印组件](https://foruda.gitee.com/images/1691289782276438288/98de6f57_14334.png "屏幕截图")

**4. 正则表达式验证**

- 实体类指定Regex特性
- 前后端共用验证逻辑
- 内置常用正则表达式常量RegexPattern

```csharp
//实体类
public class SysUser : EntityBase
{
    [Column("固定电话", "", false, "1", "50")]
    [Regex(RegexPattern.Phone, "固定电话格式不正确！")]
    public string Phone { get; set; }

    [Column("移动电话", "", false, "1", "50")]
    [Regex(RegexPattern.Mobile, "移动电话格式不正确！")]
    public string Mobile { get; set; }

    [Column("电子邮件", "", false, "1", "50")]
    [Regex(RegexPattern.Email, "电子邮件格式不正确！")]
    public string Email { get; set; }
}
```
